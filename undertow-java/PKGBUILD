maintainer="http://indiecomputing.com/"
pkgname=$(basename $(pwd))
_groupId='io.undertow'
_postfix='.Final'
pkgver=1.4.24
pkgrel=1
pkgdesc='Undertow web server'
arch=('any')
url="http://undertow.io/"
license=('Apache')
makedepends=(
    'maven'
    'jdk8-openjdk'
)
depends=(
    'jboss-logging-java'
    'jboss-xnio-java'
    'java-environment'
    'slf4j-java'
    'wildfly-common-java'
)
_jar=(
    'undertow-core'
    'undertow-servlet'
    'undertow-websockets-jsr'
)

for _j in ${_jar[@]}; do
    source+=(
        "http://search.maven.org/remotecontent?filepath=${_groupId//.//}/${_j}/${pkgver}${_postfix}/${_j}-${pkgver}${_postfix}.jar"
        "http://search.maven.org/remotecontent?filepath=${_groupId//.//}/${_j}/${pkgver}${_postfix}/${_j}-${pkgver}${_postfix}.pom"
    )
    noextract+=(
        "${_j}-${pkgver}.jar"
        "${_j}-${pkgver}.pom"
    )
    releasepage+=("http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22${_groupId}%22%20AND%20a%3A%22${_j}%22")
done
sha512sums=('df3318f4df39d7935482b4587e785135cd760e7ba844762d95701c5fca084829bb9775fd24b6a61e45d6bf59ddb792e2a01c8f6d5cc2c440fdcd0750c28f47d2'
            '208b433bfcb197bcc006286fe96945c0a15627c2cef82506edbe5aa9f10f5d5cb37a8b061fc20e41b17da70bfb6087871c55850adf2545a6e70461c78fec3efa'
            '3691788316c8cd4e73825ced23b56385e2b4c2f933cc4029ad670d6af3f155887886453168c9dffe33d49db58a5e4c74a8e31ac03544946ef5b48574e08d2187'
            'a4b4153afb4fb03e70a9ac189286c190d42abf0eb51804bef25103828b0da7707ab4d7dc27fe2d69dabc9b1f99c7deaa26f987dda3fd83214b229054cebf5661'
            'd3b004f5f3d4d8f39587418568b6d9875949c45b2e180e8c8686e6b9b350c064206fbb74c5da23c4aa000660d55636f0bf6762683abf8aad842c4170bb09dffd'
            '16b7aa40b16d1c253ae3a05168284c05675c856092ae3db75a0945ea5ec50e47a76daee08bef2824ebd3345f29a3eca355d152ff240391961b23f258e4220f4a')

package() {
    for _j in ${_jar[@]}; do
        install -m644 -D ${srcdir}/${_j}-${pkgver}${_postfix}.{jar,pom} \
                      -t ${pkgdir}/usr/lib/java/${_groupId//.//}/${_j}/${pkgver}/
    done
}
