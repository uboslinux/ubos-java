maintainer="http://indiecomputing.com/"
pkgname=$(basename $(pwd))
_groupId='io.undertow'
_postfix='.Final'
pkgver=1.4.22
pkgrel=1
pkgdesc='Undertow web server'
arch=('any')
url="http://undertow.io/"
license=('Apache')
makedepends=(
    'maven'
    'jdk8-openjdk'
)
depends=(
    'jboss-logging-java'
    'jboss-xnio-java'
    'java-environment'
    'slf4j-java'
    'wildfly-common-java'
)
_jar=(
    'undertow-core'
    'undertow-servlet'
    'undertow-websockets-jsr'
)

for _j in ${_jar[@]}; do
    source+=(
        "http://search.maven.org/remotecontent?filepath=${_groupId//.//}/${_j}/${pkgver}${_postfix}/${_j}-${pkgver}${_postfix}.jar"
        "http://search.maven.org/remotecontent?filepath=${_groupId//.//}/${_j}/${pkgver}${_postfix}/${_j}-${pkgver}${_postfix}.pom"
    )
    noextract+=(
        "${_j}-${pkgver}.jar"
        "${_j}-${pkgver}.pom"
    )
    releasepage+=("http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22${_groupId}%22%20AND%20a%3A%22${_j}%22")
done
sha512sums=('b31c2766711325d7353975c66ccfe986198d463019b72db961a0bf43faac87839e2c1d6f2b351b947f5a4d6c87c542ab0bf48381c155ac855f31cdbe60dc2336'
            '96dd3ec33d3c5e542b54c70086fb48ff1b65d319877aa02cb8a223e95f209437a960fb7c7cdc2a77def0b7f3152a85304a09824bc6d3697acb8e800b937328db'
            '39bea6bbd6707d5cd573c8fda863be91366e6f5ad8ae03e7344a0de9e31a74b19cdfd427aba0601a2a4a49a12686a1f4dfb28478ab2491a90a74e3d33f7aec17'
            'd897ad1c52b49db8de485e0694cd899bda8f5e156a31f77bff61504191ca1866fcf14192d6097016a3d4d0bb1e1e2654b9676a9f8df121f3a733864471050f6d'
            'bc67764b6d92349db4753ffe46ed9a9319e1f7aca627599155582a0e6faa0e765a2b8668be5f8e42aa1809a58334b803989f74e645037ecba9edc9ce61c8e38c'
            '738f697256d1cd775cd120240e78816ac7882329dbdca70f52397328629ad233aef0c82673facb8d4e8dcdea40e5705e4b1e2086d59ec24723e58655b6ec1277')

package() {
    for _j in ${_jar[@]}; do
        install -m644 -D ${srcdir}/${_j}-${pkgver}${_postfix}.{jar,pom} \
                      -t ${pkgdir}/usr/lib/java/${_groupId//.//}/${_j}/${pkgver}/
    done
}
